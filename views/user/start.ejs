<style>
    .homeb {
        color: rgb(28, 188, 0) !important;
    }

    #bannerCarousel .carousel-item img {
        position: relative;
        top: 0;
        left: 0;
        width: 100%;
        /* height: 100%; */
        /* object-fit: cover; */
    }

    .breadcrumb-banner {
        padding: 90px 0 100px 0 !important;
    }
</style>
<%- include('../user/newhead')%>
    <section class="banner-area organic-breadcrumb">
        <div class="container">
            <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
                <div class="col-first">
                    <h1>Home</h1>
                    <nav class="d-flex align-items-center">
                        <a href="/profile">Profile<span class="fa fa-arrow-right"></span></a>
                        <a href="/home">Home</a>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- Start category Area -->
    <section class="mt-3" style="height:17.3rem ;background: rgb(255, 255, 255);">
        <div class="container">
            <div id="bannerCarousel" class="carousel slide carousel-fade" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#bannerCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#bannerCarousel" data-slide-to="1"></li>
                </ol>
                <% if (banner.length>0){%>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="/public/productImages/<%= banner[0].image[0] %>" alt="Slide 1"
                                style="height: 17rem;">
                        </div>
                        <div class="carousel-item">
                            <img src="/public/productImages/<%= banner[0].image[1] %>" alt="Slide 2"
                                style="height: 17rem;">
                        </div>
                    </div>
                    <%}%>

                        <!-- Controls -->
                        <a class="carousel-control-prev" href="#bannerCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#bannerCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
            </div>
        </div>
    </section>


    <!-- start.ejs -->

    <!-- Category filter -->

    <!-- Price filter -->
    <!-- End category Area -->

    <section class="category-area" style="margin-top: 2rem;">
        <div class="container product-container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-12">
                    <div class="row">
                        <div class="col-lg-8 col-md-8">
                            <div class="single-deal">
                                <div class="overlay"></div>
                                <img class="img-fluid w-100" src="/public/images/novels.jpg" alt="">
                                <a href="" class="img-pop-up" target="_blank">
                                    <div class="deal-details">
                                        <h6 class="deal-title">Malayalam novels</h6>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="single-deal">
                                <div class="overlay"></div>
                                <img class="img-fluid w-100" src="/public/images/basheer.jpg" alt="">
                                <a href="" class="img-pop-up" target="_blank">
                                    <div class="deal-details">
                                        <h6 class="deal-title">Romantic</h6>
                                    </div>
                                </a>

                            </div>

                        </div>


                    </div>
                </div>

            </div>
        </div>
    </section>
    <div class="single-product-slider">
        <div class="container product-container">
            <div class="row">
                <% if (products.length> 0) {
                    for (let i = 0; i < products.length; i++) { %>
                        <% if(products[i].listable !=0){%>
                            <div class="col-lg-3 col-md-6 single-product">
                                <a href="/viewproduct?id=<%= products[i]._id %>">
                                    <img class="img-fluid" src="/productImages/<%= products[i].image[0] %>"
                                        style="width:9rem;height: 11rem;" alt="Card image cap">
                                    <div class="product-details">
                                        <h6>
                                            <%= products[i].name %>
                                        </h6>
                                        <div class="price">
                                            <h6>
                                                <%= products[i].price %>
                                            </h6>
                                        </div>
                                        <div class="category">
                                            <h6>
                                                <%= products[i].category %>
                                            </h6>
                                        </div>

                                        <div class="prd-bottom">
                                            </script>
                                            <%if(products[i].stock>0){%>
                                                <a href="/addtocart?id=<%= products[i]._id %>" class="social-info"
                                                    onclick="function3()">
                                                    <span class="fa fa-shopping-cart"></span>
                                                    <p class="hover-text" style="color: rgb(0, 201, 0);">add to bag</p>
                                                </a>
                                                <%}else{%>
                                                    <a href="" class="social-info" id="myLink">
                                                        <span class="fa fa-shopping-cart"></span>
                                                        <p class="hover-text" style="color: red;">Sold out</p>
                                                    </a>
                                                    <%}%>
                                                        <a href="/addtowishlist?id=<%= products[i]._id %>"
                                                            class="social-info" onclick="function4()">
                                                            <span class="fa fa-heart"></span>
                                                            <p class="hover-text">Wishlist</p>
                                                        </a>
                                                        <a href="/viewproduct?id=<%= products[i]._id %>"
                                                            class="social-info">
                                                            <span class="fa fa-eye"></span>
                                                            <p class="hover-text">view more</p>
                                                        </a>

                                        </div>
                                    </div>
                                    <div class="price" style="display: none;">
                                        <%= products[i].price %>
                                    </div>
                                </a>
                            </div>
                            <% }} } else { %>
                                <p>No results found.</p>
                                <% } %>

            </div>
        </div>
        <div class="pagination justify-content-center">
            <% if (currentPage> 1) { %>
                <a href="/home?page=<%= currentPage - 1 %>">Prev.</a>
                <% } %>

                    <% for (let i=1; i <=totalPages; i++) { %>
                        <a href="/home?page=<%= i %>" class="<%= currentPage === i ? 'active' : '' %>">
                            <%= i %>
                        </a>
                        <% } %>

                            <% if (currentPage < totalPages) { %>
                                <a href="/home?page=<%= parseInt(currentPage) + 1 %>">Next</a>
                                <% } %>
        </div>
    </div>
    </section>
    <section class="features-area section_gap">
        <div class="container">
            <div class="row features-inner">
                <!-- single features -->
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-features">
                        <div class="f-icon">
                            <img src="img/features/f-icon1.png" alt="">
                        </div>
                        <h6>Free Delivery</h6>
                        <p>Free Shipping on all order</p>
                    </div>
                </div>
                <!-- single features -->
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-features">
                        <div class="f-icon">
                            <img src="img/features/f-icon2.png" alt="">
                        </div>
                        <h6>Return Policy</h6>
                        <p>Free Shipping on all order</p>
                    </div>
                </div>
                <!-- single features -->
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-features">
                        <div class="f-icon">
                            <img src="img/features/f-icon3.png" alt="">
                        </div>
                        <h6>24/7 Support</h6>
                        <p>Free Shipping on all order</p>
                    </div>
                </div>
                <!-- single features -->
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-features">
                        <div class="f-icon">
                            <img src="img/features/f-icon4.png" alt="">
                        </div>
                        <h6>Secure Payment</h6>
                        <p>Free Shipping on all order</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end features Area -->
    <!-- Add the following code where you want to display the pagination links -->
    <%- include('../user/footer')%>


        <script src="/public/js/vendor/jquery-2.2.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"></script>
        <!-- <script src="/public/js/vendor/bootstrap.min.js"></script> -->
        <script src="/public/js/jquery.ajaxchimp.min.js"></script>
        <script src="/public/js/jquery.nice-select.min.js"></script>
        <script src="/public/js/jquery.sticky.js"></script>
        <script src="/public/js/nouislider.min.js"></script>
        <!-- <script src="/public/js/countdown.js"></script> -->
        <script src="/public/js/jquery.magnific-popup.min.js"></script>
        <script src="/public/js/owl.carousel.min.js"></script>
        <!--gmaps Js-->
        <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script> -->
        <!-- <script src="/public/js/gmaps.min.js"></script> -->
        <script src="/public/js/main.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.all.min.js"></script>

        <script language="JavaScript">
            function function3() {
                Swal.fire({
                    title: 'Success!',
                    text: 'Item added to cart successfully!',
                    icon: 'success',
                    showConfirmButton: false, // Hide the "OK" button
                });
            }
        </script>
        <script>
            function filterByCategory() {
                const categoryFilter = document.getElementById("category-filter");
                const selectedCategory = categoryFilter.value.toLowerCase();

                const products = document.querySelectorAll(".single-product");
                const currentPage = parseInt(new URLSearchParams(window.location.search).get("page")) || 1;
                const perPage = 10; // Number of products per page

                let startIndex = (currentPage - 1) * perPage;
                let endIndex = startIndex + perPage;

                for (let i = 0; i < products.length; i++) {
                    const productCategory = products[i].querySelector(".category").innerText.toLowerCase();
                    if (selectedCategory === "" || productCategory.trim() === selectedCategory.trim()) {
                        if (i >= startIndex && i < endIndex) {
                            products[i].style.display = "block";
                        } else {
                            products[i].style.display = "none";
                        }
                    } else {
                        products[i].style.display = "none";
                    }
                }
            }

            function filterByPrice() {
                var price = parseInt(document.getElementById('price-filter').value);
                const products = document.querySelectorAll(".single-product");
                const currentPage = parseInt(new URLSearchParams(window.location.search).get("page")) || 1;
                const perPage = 10; // Number of products per page

                let startIndex = (currentPage - 1) * perPage;
                let endIndex = startIndex + perPage;

                for (var i = 0; i < products.length; i++) {
                    var product = products[i];
                    var productPrice = parseInt(products[i].querySelector(".price").innerText);
                    if (price === 0 || productPrice <= price) {
                        if (i >= startIndex && i < endIndex) {
                            product.style.display = 'block';  // Show the product
                        } else {
                            product.style.display = 'none';   // Hide the product
                        }
                    } else {
                        product.style.display = 'none';  // Hide the product
                    }
                }
            }
            function function3() {
                Swal.fire({
                    title: 'Success!',
                    text: 'Item added to cart successfully!',
                    icon: 'success',
                    showConfirmButton: false, // Hide the "OK" button
                });
            }
            function function4() {
                Swal.fire({
                    title: 'Success!',
                    text: 'Item added to wishlist successfully!',
                    icon: 'success',
                    showConfirmButton: false, // Hide the "OK" button
                });
            }
        </script>
        <script>
            $(document).ready(function () {
                $('#bannerCarousel').carousel({
                    interval: 3000 // Change slide every 1 second
                });
            });
        </script>
     <script>
        var link = document.getElementById("myLink");
    
        link.addEventListener("click", function(event) {
            event.preventDefault();
        });
    </script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


        </body>

        </html>